# lambda 表达式

## 语法

1. 带形参列表的 lambda 表达式

```C++
[捕获] (形参列表) {}
```

2. 不带形参列表的 lambda 表达式

```C++
[捕获] {}
```

## 闭包类型

lambda 表达式是纯右值表达式，它的类型是独有的无名非联合体非聚合体类型，被称为闭包类型。

### 闭包类型的限制

1. 无默认构造函数
   
   闭包类型没有默认构造函数（必须通过 lambda 表达式或拷贝/移动构造创建实例）

   ```C++
   // 通过拷贝构造创建闭包实例
   int a = 5;

   string msg = "count: ";

   auto origin_lambda = [a, msg]() mutable {
       a++;
       cout << msg << a << end;
       return a;
   }

   // 拷贝构造：创建新的闭包实例
   auto copy_lambda = origin_lambda;
   ```
   ```C++
   auto ptr = make_unique<int>(100);

   auto origin_lambda = [ptr = move(ptr)]() {
       cout << "移动捕获的值：" << *ptr << endl;
   };

   auto move_lambda = move(origin_lambda);

   move_lambda();

   // origin_lambda();    // 未定义行为（访问已释放的 unique_ptr）
   ```
   
3. 无赋值运算符
